<!DOCTYPE html>
<html>
  <head>
    <title>FC+UribeAndres</title>
    <meta charset="utf-8">
  </head>

  <body>
    <style>
      table, th, td {
        border: 1px solid black;
      }
    </style>

    <h1>Clase 1: JS y ES6</h1>
    <h2>Ejercicio con Funcion Constructora</h2>
    <h2>Por: Andrés Uribe Montoya  &#x1F525;</h2>

    <table>
      <tr> <th>Nombre:</th>   <td id="nombre"></td>   </tr>
      <tr> <th>Apellido:</th> <td id="apellido"></td>   </tr>
      <tr> <th>Mascotas:</th> <td id="mascotas"></td>   </tr>
      <tr> <th>Libros:</th>   <td id="libros"></td>   </tr>
    </table>

    <script >
      function renderTable(usuario){
        document.getElementById("nombre").innerText = usuario.nombre
        document.getElementById("apellido").innerText = usuario.apellido
        document.getElementById("mascotas").innerText = usuario.mascotas
        document.getElementById("libros").innerText = JSON.stringify(usuario.libros)
      }
    </script>

    <script>
      function Usuario(nombre='No-Name', apellido='No-Lastname', libros=[], mascotas=[]){
        if(typeof nombre != "string"){
          throw new TypeError("Nombre no es un String!")
        }
        if(typeof apellido != "string"){
          throw new TypeError("Apellido no es un String!")
        }
        if( !Array.isArray(libros)){
          throw new TypeError("Libros no es un Array!")
        }
        if( !Array.isArray(mascotas)){
          throw new TypeError("Mascotas no es un Array!")
        }
        this.nombre = nombre
        this.apellido = apellido
        this.libros = libros
        this.mascotas = mascotas
      }

      Usuario.prototype.getFullName = function(){
        return `${this.nombre} ${this.apellido}`
      }

      Usuario.prototype.addMascota = function(mascota){
        if (typeof mascota != 'string'){
          throw new TypeError("mascota no es un string! ")
        }
        this.mascotas.push(mascota)
        renderTable(usuario)
      }

      Usuario.prototype.getMascotas = function(){
        return this.mascotas.length
      }

      Usuario.prototype.addBook = function(book='', author=''){
        this.libros.push({book: book, author: author})
        renderTable(usuario)
      }

      Usuario.prototype.getBooks = function(){
        return this.libros.map(function(libro){ return libro.book })
      }

      //Crea el usuario:
      var usuario = new Usuario(nombre="Andres", apellido="Uribe");
      console.log('Usuario: ', usuario);

      // Muestra su nombre completo:
      var fullname = usuario.getFullName();
      console.log('Fullname: ', fullname);

      //Agrega una mascota:
      usuario.addMascota("Un Dragón")
      console.log("Mascotas: ", usuario.mascotas);

      //Numero de mascotas
      var numMascotas = usuario.getMascotas();
      console.log("Numero de Mascotas:", numMascotas);

      //Agregar Libro:
      usuario.addBook(book="Dracula", author="Bram Stoker");
      console.log("Agregar Libro", usuario.libros);

      //Libros
      var libros = usuario.getBooks();
      console.log("Libros: ", libros); 
    </script> 
  </body>
</html>
